{"version":3,"sources":["src/client/models/block.ts","src/client/components/Keypad/index.tsx","src/client/hooks/useWindowDimensions/index.ts","src/client/components/Gameboy/index.tsx","src/client/components/Digits/index.tsx","src/client/components/Block/index.tsx","src/client/components/Matrix/index.tsx","src/client/constants/keyboard.ts","src/client/screens/Playground/index.tsx","src/client/screens/Playground/utils.tsx","src/client/screens/NotFoundScreen.tsx","src/client/screens/Login/index.tsx","src/client/navigation/LinkingConfiguration.ts","src/client/navigation/index.tsx","App.tsx","web-build/register-service-worker.js","assets/sprite.png","src/client/constants/tetriminos.ts"],"names":["Block","option","this","type","timeStamp","Date","now","shape","blockShape","pos","initialPos","map","val","index","row","reverse","n","matrix","newState","fall","isValid","positions","_","rowIndex","colIndex","push","rows","getBlockPos","cols","left","min","top","right","max","bottom","undefined","find","shapePos","isEqual","hitBlock","col","getCorner","newMatrix","cloneDeep","size","RoundButton","color","label","style","onPress","View","alignItems","margin","TouchableOpacity","backgroundColor","borderRadius","height","width","shadowColor","shadowOffset","shadowOpacity","shadowRadius","Text","marginTop","Keypad","isPause","flexDirection","flex","document","dispatchEvent","KeyboardEvent","keyCode","keyboard","pause","which","sound","reset","space","justifyContent","rotate","marginRight","down","useWindowDimensions","dim","React","Dimensions","get","dimensions","setDimensions","stillCareAboutTheCallback","updateDimensions","nextDimensions","addEventListener","removeEventListener","useDimensionsSync","Gameboy","scale","children","window","w","h","styles","container","gameboy","transform","title","display","position","opacity","StyleSheet","create","padding","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderWidth","paddingBottom","paddingHorizontal","fontSize","marginVertical","textAlign","Digits","imageURI","Asset","fromModule","require","uri","Array","key","source","overflow","imageStyle","resizeMode","marginBottom","outer","borderColor","inner","value","Matrix","block","isBlock","socket","io","Playground","params","useRoute","room","username","useState","roomUsers","setRoomUsers","sample","blockTypes","setBlock","blankMatrix","setMatrix","setIsPause","useEffect","emit","on","message","addResponseMessage","text","data","users","user","nextBlockType","indexOf","useInterval","includes","currentBlock","printBlock","useKey","_key","prevState","prevIsPause","prevMatrix","drop","alignSelf","marginLeft","blockMatrix","subtitle","formatChatSubtitle","handleNewUserMessage","players","length","join","NotFoundScreen","navigation","replace","link","linkText","fontWeight","paddingVertical","Login","useNavigation","setUsername","setRoom","TextInput","onChangeText","prefixes","Linking","config","screens","Root","NotFound","Navigation","colorScheme","NavigationContainer","linking","LinkingConfiguration","theme","DarkTheme","DefaultTheme","RootNavigator","Stack","createStackNavigator","Navigator","screenOptions","headerShown","Screen","name","component","options","App","StatusBar","navigator","serviceWorker","register","scope","then","info","catch","error","console","module","exports","I","L","J","Z","S","O","T"],"mappings":"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","file":"static/js/app.2c69069e.chunk.js","sourcesContent":["import _ from 'lodash';\nimport { blockShape, initialPos } from '/client/constants/tetriminos.ts';\n\nclass Block {\n  pos: number[];\n  shape: number[][];\n  type: TetriminosType;\n  timeStamp: number;\n\n  constructor(option: BlockOption) {\n    this.type = option.type;\n\n    if (!option.timeStamp) {\n      this.timeStamp = Date.now();\n    } else {\n      this.timeStamp = option.timeStamp;\n    }\n    if (!option.shape) {\n      this.shape = blockShape[this.type];\n    } else {\n      this.shape = option.shape;\n    }\n    if (!option.pos) {\n      this.pos = initialPos[this.type];\n    } else this.pos = option.pos;\n  }\n  rotate(): Block {\n    const shape = this.shape;\n    const result: number[][] = shape[0].map((val, index) => shape.map(row => row[index]).reverse());\n    return new Block({\n      shape: result,\n      type: this.type,\n      pos: this.pos,\n      timeStamp: this.timeStamp,\n    });\n  }\n  fall(n = 1): Block {\n    return new Block({\n      shape: this.shape,\n      type: this.type,\n      pos: [this.pos[0] + n, this.pos[1]],\n      timeStamp: Date.now(),\n    });\n  }\n  right(): Block {\n    return new Block({\n      shape: this.shape,\n      type: this.type,\n      pos: [this.pos[0], this.pos[1] + 1],\n      timeStamp: this.timeStamp,\n    });\n  }\n  left(): Block {\n    return new Block({\n      shape: this.shape,\n      type: this.type,\n      pos: [this.pos[0], this.pos[1] - 1],\n      timeStamp: this.timeStamp,\n    });\n  }\n  drop(matrix: Matrix): Block {\n    let newState = new Block({ type: this.type, pos: this.pos, shape: this.shape });\n    while (newState.fall().isValid(matrix)) { \n      newState = newState.fall();\n    }\n    return newState;\n  }\n  getBlockPos(): number[][] {\n    const positions: number[][] = [];\n    _.map(this.shape, (row, rowIndex) =>\n      _.map(row, (val, colIndex) => { \n        if (val) positions.push([rowIndex + this.pos[0], colIndex + this.pos[1]]);\n      }));\n    return positions;\n  }\n  getCorner(): { left: number, top: number, right: number, bottom: number } { \n    const rows = _.map(this.getBlockPos(), ([row]) => row);\n    const cols = _.map(this.getBlockPos(), ([, col]) => col);\n    return {\n      left: _.min(cols) ?? 0,\n      top: _.min(rows) ?? 0,\n      right: _.max(cols) ?? 0,\n      bottom: _.max(rows) ?? 0,\n    };\n  }\n  isBlock(pos: number[]): boolean { \n    return _.find(this.getBlockPos(), (shapePos) => _.isEqual(shapePos, pos)) !== undefined;\n  }\n  isValid(matrix: Matrix): boolean { \n    const hitBlock = _.find(this.getBlockPos(), ([row, col]) => matrix?.[row]?.[col]);\n    const { left, right, bottom } = this.getCorner();\n    return bottom < 20\n      && left >= 0\n      && right < 10\n      && !hitBlock;\n  }\n  printBlock(matrix: Matrix): Matrix { \n    const newMatrix = _.cloneDeep(matrix);\n    _.map(this.getBlockPos(), (pos) => {\n      if (pos[0] >= 0 && pos[0] < _.size(newMatrix)\n        && pos[1] >= 0 && pos[1] < _.size(newMatrix[0])) {\n        newMatrix[pos[0]][pos[1]] = 1;\n      }\n    });\n    return newMatrix;\n  }\n}\n\nexport default Block;\n","import { TouchableOpacity, View, Text, ViewStyle } from 'react-native';\nimport * as React from 'react';\n\nimport { keyboard } from '/client/constants/keyboard';\n\nconst RoundButton = ({\n  size, color, label, style, onPress,\n}: {\n  size: number, color: string, label?: string, style?: ViewStyle, onPress?: () =>  void,\n}): JSX.Element => {\n  return (\n    <View style={[{ alignItems: 'center', margin: 10 }, style]}>\n      <TouchableOpacity\n        onPress={onPress}\n        style={{\n          backgroundColor: color,\n          borderRadius: size / 2,\n          height: size,\n          width: size,\n          shadowColor: 'rgba(0,0,0, .4)',\n          shadowOffset: { height: 1, width: 1 },\n          shadowOpacity: 20,\n          shadowRadius: 5,\n        }} />\n      <Text style={{ marginTop: 10 }}>{label}</Text>\n    </View>\n  );\n};\n\nconst Keypad = ({ isPause }: { isPause?: boolean }): JSX.Element => {\n  return (\n    <View>\n      <View style={{ flexDirection: 'row' }}>\n        <View style={{ flex: 1 }}>\n          <View style={{ flexDirection: 'row', marginTop: 20 }}>\n            <RoundButton\n              color=\"#2dc421\" size={50} label=\"Pause/Play(P)\"\n              // @ts-ignore https://github.com/microsoft/TSJS-lib-generator/pull/892\n              onPress={() => document.dispatchEvent(new KeyboardEvent('keydown', { keyCode: keyboard.pause, which: keyboard.pause }))}\n            />\n            <RoundButton\n              color=\"#2dc421\" size={50} label=\"Sound(S)\"\n              // @ts-ignore https://github.com/microsoft/TSJS-lib-generator/pull/892\n              onPress={() => document.dispatchEvent(new KeyboardEvent('keydown', { keyCode: keyboard.sound, which: keyboard.sound }))}\n            />\n            <RoundButton\n              color=\"#efcc19\" size={50} label=\"Reset(R)\"\n              // @ts-ignore https://github.com/microsoft/TSJS-lib-generator/pull/892\n              onPress={() => document.dispatchEvent(new KeyboardEvent('keydown', { keyCode: keyboard.reset, which: keyboard.reset }))}\n            />\n          </View>\n          <View style={{ alignItems: 'center' }}>\n            <RoundButton\n              color=\"#5a65f1\" size={160} label=\"Drop(Space)\" style={{ marginTop: 20 }}\n              // @ts-ignore https://github.com/microsoft/TSJS-lib-generator/pull/892\n              onPress={() => !isPause && document.dispatchEvent(new KeyboardEvent('keydown', { keyCode: keyboard.space, which: keyboard.space }))}\n            />\n          </View>\n        </View>\n        <View style={{ alignItems: 'center', flex: 1, justifyContent: 'center' }}>\n          <RoundButton\n            color=\"#5a65f1\" size={70} style={{ margin: 0 }}\n            // @ts-ignore https://github.com/microsoft/TSJS-lib-generator/pull/892\n            onPress={() => !isPause && document.dispatchEvent(new KeyboardEvent('keydown', { keyCode: keyboard.rotate, which: keyboard.rotate }))}\n          />\n          <View style={{ flexDirection: 'row' }}>\n            <RoundButton\n              color=\"#5a65f1\" size={70} style={{ margin: 0, marginRight: 60 }}\n              // @ts-ignore https://github.com/microsoft/TSJS-lib-generator/pull/892\n              onPress={() => !isPause && document.dispatchEvent(new KeyboardEvent('keydown', { keyCode: keyboard.left, which: keyboard.left }))}\n            />\n            <RoundButton\n              color=\"#5a65f1\" size={70} style={{ margin: 0 }}\n              // @ts-ignore https://github.com/microsoft/TSJS-lib-generator/pull/892\n              onPress={() => !isPause && document.dispatchEvent(new KeyboardEvent('keydown', { keyCode: keyboard.right, which: keyboard.right }))}\n            />\n          </View>\n          <RoundButton\n            color=\"#5a65f1\" size={70} style={{ margin: 0 }}\n            // @ts-ignore https://github.com/microsoft/TSJS-lib-generator/pull/892\n            onPress={() => !isPause && document.dispatchEvent(new KeyboardEvent('keydown', { keyCode: keyboard.down, which: keyboard.down }))}\n          />\n        </View>\n      </View>\n    </View>\n  );\n};\n\nexport default Keypad;\n","import { Dimensions, ScaledSize } from 'react-native';\nimport * as React from 'react';\n\ntype EventValue = {\n  window: ScaledSize;\n  screen: ScaledSize;\n};\n\nexport const useDimensionsSync = (dim: 'window' | 'screen' = 'window'): { width: number, height: number } => {\n  const [dimensions, setDimensions] = React.useState(() => Dimensions.get(dim));\n\n  // Start listening to changes\n  React.useEffect(() => {\n    let stillCareAboutTheCallback = true;\n\n    const updateDimensions = (nextDimensions: EventValue) => {\n      stillCareAboutTheCallback && setDimensions(nextDimensions[dim]);\n    };\n\n    Dimensions.addEventListener('change', updateDimensions);\n\n    return () => {\n      stillCareAboutTheCallback = false;\n      Dimensions.removeEventListener('change', updateDimensions);\n    };\n  }, [dim, setDimensions]);\n\n  return dimensions;\n};\n\nexport const useWindowDimensions = (): { width: number, height: number } => {\n  return useDimensionsSync('window');\n};\n","import { StyleSheet, Text, View } from 'react-native';\nimport * as React from 'react';\nimport Keypad from '/client/components/Keypad';\n\nimport { useWindowDimensions } from '/client/hooks/useWindowDimensions';\n\nexport default function Gameboy({ children, isPause }: { children: React.ReactChild, isPause?: boolean }): JSX.Element {\n  const window = useWindowDimensions();\n  const w = window.width;\n  const h = window.height;\n  const ratio = h / w;\n  let scale;\n  if (ratio < 1.5) {\n    scale = h / 960;\n  } else {\n    scale = w / 560;\n  }\n  return (\n    <View style={styles.container}>\n      <View style={[styles.gameboy, { transform: [{ scale }] }]}>\n        <Text style={styles.title}>R E D â–  T E T R I S</Text>\n        <View style={styles.display}>\n          {children}\n          {isPause ?\n            <View style={[styles.display, { position: 'absolute', opacity: 0.8 }]} >\n              <Text>Press Play(P) to start</Text>\n            </View>\n            : null}\n        </View>\n        <Keypad isPause={isPause}/>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#009688',\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 20,\n    height: '100%',\n  },\n  display: {\n    alignItems: 'center',\n    backgroundColor: '#9ead86',\n    borderBottomColor: '#fa6b6b',\n    borderLeftColor: '#980f0f',\n    borderRightColor: '#fa6b6b',\n    borderTopColor: '#980f0f',\n    borderWidth: 5,\n    height: 470,\n    justifyContent: 'center',\n    padding: 10,\n    width: 400,\n  },\n  gameboy: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#af0000',\n    borderRadius: 20,\n    paddingBottom: 50,\n    paddingHorizontal: 50,\n  },\n  title: {\n    fontSize: 30,\n    marginVertical: 20,\n    textAlign: 'center',\n  },\n});\n","import _ from 'lodash';\nimport { Asset } from 'expo-asset';\nimport { ImageBackground, View, ViewStyle } from 'react-native';\nimport * as React from 'react';\n\nexport default function Digits({ style }: { style?: ViewStyle }): JSX.Element {\n  // eslint-disable-next-line @typescript-eslint/no-var-requires\n  const imageURI = Asset.fromModule(require('../../../../assets/sprite.png')).uri;\n  return (\n    <View style={[{ flexDirection: 'row' }, style]} >\n      {_.map(Array(6), (val, index: number) => <ImageBackground\n        key={index}\n        source={{ uri: imageURI }}\n        style={{ width: 14, height: 24, overflow: 'hidden' }}\n        imageStyle={{\n          height: 186,\n          left: -215,\n          resizeMode: 'cover',\n          top: -25,\n          width: 400,\n        }}\n      />)}\n    </View>\n  );\n}\n","import { StyleSheet, View } from 'react-native';\nimport * as React from 'react';\n\nconst styles = StyleSheet.create({\n  container: {\n    marginRight: 2,\n    marginBottom: 2,\n  },\n  outer: {\n    alignItems: 'center',\n    borderColor: '#879372',\n    borderWidth: 1,\n    height: 20,\n    justifyContent: 'center',\n    width: 20,\n  },\n  inner: {\n    height: 12,\n    width: 12,\n    backgroundColor: '#879372',\n  },\n});\n\nconst Block = ({ value }: { value: number }): JSX.Element => {\n  return (\n    <View style={[styles.outer, value ? { borderColor: 'black' } : undefined]}>\n      <View style={[styles.inner, value ? { backgroundColor: 'black' } : undefined]} />\n    </View>\n  );\n};\n\nexport default Block;\n","import _ from 'lodash';\nimport { View, ViewStyle, StyleSheet } from 'react-native';\nimport * as React from 'react';\n\nimport BlockComponent from '/client/components/Block';\nimport Block from '/client/models/block';\n\nconst blockWidth = 22;\n\nconst Matrix = ({ block, matrix, style }: { block: Block, matrix: Matrix, style?: ViewStyle }): JSX.Element => {\n  return (\n    <View style={[styles.container, { height: _.size(matrix) * blockWidth }, style]}>\n      {_.map(matrix, (row, rowIndex) =>\n        <View key={rowIndex} style={{ flexDirection: 'row', width: _.size(row) * blockWidth, justifyContent: 'space-between' }}>\n          {_.map(row, (value, colIndex) => <BlockComponent key={colIndex} value={block.isBlock([rowIndex, colIndex]) ? 1 : value} />)}\n        </View>)}\n    </View>\n  );\n};\n\nexport default Matrix;\n\nconst styles = StyleSheet.create({\n  container: {\n    padding: 2, justifyContent: 'space-between', borderColor: 'black', borderWidth: 1, backgroundColor: '#9ead86',\n  },\n});","export const keyboard = {\n  'left': 37,\n  'rotate': 38,\n  'right': 39,\n  'down': 40,\n  'space': 32,\n  'sound': 83,\n  'reset': 82,\n  'pause': 80,\n};\n","import  React, { useState, useEffect } from 'react';\nimport _ from 'lodash';\nimport 'react-chat-widget/lib/styles.css';\nimport { View, Text } from 'react-native';\nimport { Widget as ChatWidget, addResponseMessage } from 'react-chat-widget';\nimport useInterval from '@use-it/interval';\nimport useKey from 'use-key-hook';\nimport { useRoute, RouteProp } from '@react-navigation/native';\nimport io from 'socket.io-client';\n\nimport { blankMatrix, blockMatrix } from '/client/constants/tetriminos';\nimport { blockTypes } from '/client/constants/tetriminos';\nimport { keyboard } from '/client/constants/keyboard';\nimport Block from '/client/models/block';\nimport Digits from '/client/components/Digits';\nimport formatChatSubtitle from '/client/screens/Playground/utils';\nimport Gameboy from '/client/components/Gameboy';\nimport Matrix from '/client/components/Matrix';\n\n// Initialize new socket\nconst socket = io(`${process.env.EXPO_SOCKET_URL}`);\n\nexport default function Playground(): JSX.Element {\n  const route = useRoute<RouteProp<RootStackParamList, 'Playground'>>();\n  const { params } = route;\n  const { room, username } = params ?? {};\n  const [roomUsers, setRoomUsers] = useState<string[]>([]);\n  const [block, setBlock] = useState<Block>(new Block({ type: _.sample(blockTypes) ?? 'T' }));\n  const [matrix, setMatrix] = useState<Matrix>(blankMatrix);\n  const [isPause, setIsPause] = useState<boolean>(true);\n  useEffect(() => {\n    socket.emit('joinRoom', { username, room });\n    // Message from server\n    socket.on('message', (message: Message) => {\n      if (message.username !== username)\n        addResponseMessage(message.username + ': ' + message.text, message.username);\n    });\n    socket.on('update room users', (data: { room: string, users: User[] }) => {\n      setRoomUsers(data.users.map((user) => user.username));\n    });\n  }, []);\n  const handleNewUserMessage = (message: string) => {\n    socket.emit('chatMessage', message);\n  };\n  const nextBlockType = blockTypes[(_.indexOf(blockTypes, block.type) + 1) % _.size(blockTypes)];\n  useInterval(() => {\n    if (isPause) return;\n    if (_.includes(matrix[0], 1)) {\n      setMatrix(blankMatrix);\n      setIsPause(true);\n    } else {\n      setBlock((currentBlock) => {\n        if (!block.fall().isValid(matrix)) {\n          setMatrix(block.printBlock(matrix));\n          return new Block({ type: nextBlockType });\n        } else {\n          return currentBlock.fall();\n        }\n      });\n    }\n  }, 500);\n  useKey((_key: number, { keyCode }: { keyCode: number }) => {\n    if (keyCode === keyboard.pause) setIsPause((prevState) => !prevState);\n    if (keyCode === keyboard.reset) {\n      setBlock(new Block({ type: _.sample(blockTypes) ?? 'T' }));\n      setMatrix(blankMatrix);\n      setIsPause(true);\n    }\n    setIsPause((prevIsPause) => {\n      if (!prevIsPause) {\n        if (keyCode === keyboard.rotate) setMatrix((prevMatrix) => {\n          setBlock((currentBlock) => currentBlock.rotate().isValid(prevMatrix) ? currentBlock.rotate() : currentBlock);\n          return prevMatrix;\n        });\n        if (keyCode === keyboard.left) setMatrix((prevMatrix) => {\n          setBlock((currentBlock) => currentBlock.left().isValid(prevMatrix) ? currentBlock.left() : currentBlock);\n          return prevMatrix;\n        });\n        if (keyCode === keyboard.right) setMatrix((prevMatrix) => {\n          setBlock((currentBlock) => currentBlock.right().isValid(prevMatrix) ? currentBlock.right() : currentBlock);\n          return prevMatrix;\n        });\n        if (keyCode === keyboard.down) setMatrix((prevMatrix) => {\n          setBlock((currentBlock) => currentBlock.fall().isValid(prevMatrix) ? currentBlock.fall() : currentBlock);\n          return prevMatrix;\n        });\n        if (keyCode === keyboard.space) setMatrix((prevMatrix) => {\n          setBlock((currentBlock) => currentBlock.drop(prevMatrix));\n          return prevMatrix;\n        });\n      }\n      return prevIsPause;\n    });\n  });\n  return (\n    <>\n      <Gameboy isPause={isPause}>\n        <View style={{ flexDirection: 'row', alignSelf:'flex-start', width: '100%' }}>\n          <Matrix matrix={matrix} block={block}/>\n          <View style={{ marginLeft: 20, flex: 1 }} >\n            <Text style={{ fontSize: 20 }}>Score</Text>\n            <Digits style={{ marginVertical: 10, alignSelf: 'flex-end' }} />\n            <Text style={{ fontSize: 20 }}>Start Line</Text>\n            <Digits style={{ marginVertical: 10, alignSelf: 'flex-end' }} />\n            <Text style={{ fontSize: 20 }}>Level</Text>\n            <Digits style={{ marginVertical: 10, alignSelf: 'flex-end' }} />\n            <Text style={{ fontSize: 20 }}>Next</Text>\n            <Matrix\n              matrix={blockMatrix}\n              block={new Block({ type: nextBlockType, pos: [0, 0] })}\n              style={{ borderWidth: 0, marginVertical: 10, alignSelf: 'flex-end' }}\n            />\n          </View>\n        </View>\n      </Gameboy>\n      {room && username &&\n        <ChatWidget title=\"RedTetris\" subtitle={formatChatSubtitle(roomUsers)} handleNewUserMessage={handleNewUserMessage}/>\n      }\n    </>\n  );\n}\n","const formatChatSubtitle = (players: string[]): string => {\n  if (players.length === 0) return 'No players';\n  return `Players: ${players.join(', ')}`;\n};\n\nexport default formatChatSubtitle;\n","import { StackScreenProps } from '@react-navigation/stack';\nimport * as React from 'react';\nimport { StyleSheet, Text, TouchableOpacity, View } from 'react-native';\n\nexport default function NotFoundScreen({\n  navigation,\n}: StackScreenProps<RootStackParamList, 'NotFound'>): JSX.Element {\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>{'This screen doesn\\'t exist.'}</Text>\n      <TouchableOpacity onPress={() => navigation.replace('Root')} style={styles.link}>\n        <Text style={styles.linkText}>Go to home screen!</Text>\n      </TouchableOpacity>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 20,\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  link: {\n    marginTop: 15,\n    paddingVertical: 15,\n  },\n  linkText: {\n    fontSize: 14,\n    color: '#2e78b7',\n  },\n});\n","import { StackNavigationProp } from '@react-navigation/stack';\nimport { StyleSheet, Text, TouchableOpacity, TextInput, View } from 'react-native';\nimport { useNavigation } from '@react-navigation/native';\nimport * as React from 'react';\n\nimport Gameboy from '/client/components/Gameboy';\n\nexport default function Login(): JSX.Element {\n  const navigation = useNavigation<StackNavigationProp<RootStackParamList, 'Root'>>();\n  const [username, setUsername] = React.useState<string | null>();\n  const [room, setRoom] = React.useState<string | null>();\n  return (\n    <Gameboy>\n      <View style={{ alignItems: 'center' }}>\n        <Text style={styles.title}>{'Username'}</Text>\n        <TextInput\n          value={username ?? ''}\n          onChangeText={setUsername}\n          style={{ borderWidth: 1, marginBottom: 20, height: 30 }}\n        />\n        <Text style={styles.title}>{'Room'}</Text>\n        <TextInput\n          value={room ?? ''}\n          onChangeText={setRoom}\n          style={{ borderWidth: 1, marginBottom: 20, height: 30 }}\n        />\n        <TouchableOpacity\n          style={{ marginBottom: 20 }}\n          onPress={() => username && room && navigation.push('Playground', { username, room })}\n        >\n          <Text style={styles.linkText}>Join Room</Text>\n        </TouchableOpacity>\n        <TouchableOpacity\n          onPress={() => navigation.push('Playground', {})}\n        >\n          <Text style={styles.linkText}>Solo mode</Text>\n        </TouchableOpacity>\n      </View>\n    </Gameboy>\n  );\n}\n\nconst styles = StyleSheet.create({\n  title: {\n    marginBottom: 10,\n    alignSelf: 'flex-start',\n  },\n  linkText: {\n    fontSize: 14,\n    color: '#004580',\n  },\n});\n","import * as Linking from 'expo-linking';\n\nexport default {\n  prefixes: [Linking.makeUrl('/')],\n  config: {\n    screens: {\n      Root: '/',\n      Playground: '/play',\n      NotFound: '*',\n    },\n  },\n};\n","import { NavigationContainer, DefaultTheme, DarkTheme } from '@react-navigation/native';\nimport { createStackNavigator } from '@react-navigation/stack';\nimport * as React from 'react';\nimport { ColorSchemeName } from 'react-native';\n\nimport NotFoundScreen from '/client/screens/NotFoundScreen';\nimport Login from '/client/screens/Login';\nimport Playground from '/client/screens/Playground';\nimport LinkingConfiguration from '/client/navigation/LinkingConfiguration';\n\n// If you are not familiar with React Navigation, we recommend going through the\n// \"Fundamentals\" guide: https://reactnavigation.org/docs/getting-started\nexport default function Navigation({ colorScheme }: { colorScheme?: ColorSchemeName }): JSX.Element {\n  return (\n    <NavigationContainer\n      linking={LinkingConfiguration}\n      theme={colorScheme === 'dark' ? DarkTheme : DefaultTheme}>\n      <RootNavigator />\n    </NavigationContainer>\n  );\n}\n\n// A root stack navigator is often used for displaying modals on top of all other content\n// Read more here: https://reactnavigation.org/docs/modal\nconst Stack = createStackNavigator<RootStackParamList>();\n\nfunction RootNavigator() {\n  return (\n    <Stack.Navigator screenOptions={{ headerShown: false }}>\n      <Stack.Screen name=\"Root\" component={Login} />\n      <Stack.Screen name=\"Playground\" component={Playground} />\n      <Stack.Screen name=\"NotFound\" component={NotFoundScreen} options={{ title: 'Oops!' }} />\n    </Stack.Navigator>\n  );\n}\n","import { StatusBar } from 'expo-status-bar';\nimport React from 'react';\nimport { SafeAreaProvider } from 'react-native-safe-area-context';\n\nimport Navigation from './src/client/navigation';\n\nexport default function App(): JSX.Element | null {\n  return (\n    <SafeAreaProvider>\n      <Navigation />\n      <StatusBar />\n    </SafeAreaProvider>\n  );\n}\n","/* eslint-env browser */\n\nif ('serviceWorker' in navigator) {\n  window.addEventListener('load', function () {\n    navigator.serviceWorker\n      .register('/expo-service-worker.js', { scope: '/' })\n      .then(function (info) {\n        // console.info('Registered service-worker', info);\n      })\n      .catch(function (error) {\n        console.info('Failed to register service-worker', error);\n      });\n  });\n}\n","module.exports = __webpack_public_path__ + \"static/media/sprite.81de6409.png\";","import _ from 'lodash';\n\nexport const blockShape = {\n  I: [\n    [0, 0, 0, 0],\n    [1, 1, 1, 1],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n  ],\n  L: [\n    [0, 0, 1],\n    [1, 1, 1],\n    [0, 0, 0],\n  ],\n  J: [\n    [1, 0, 0],\n    [1, 1, 1],\n    [0, 0, 0],\n  ],\n  Z: [\n    [1, 1, 0],\n    [0, 1, 1],\n    [0, 0, 0],\n  ],\n  S: [\n    [0, 1, 1],\n    [1, 1, 0],\n    [0, 0, 0],\n  ],\n  O: [\n    [1, 1],\n    [1, 1],\n  ],\n  T: [\n    [0, 1, 0],\n    [1, 1, 1],\n    [0, 0, 0],\n  ],\n};\n\nexport const initialPos = {\n  I: [-2, 3],\n  L: [-2, 4],\n  J: [-2, 4],\n  Z: [-2, 4],\n  S: [-2, 4],\n  O: [-2, 4],\n  T: [-2, 4],\n};\n\nexport const blockTypes: TetriminosType[] = ['I','L','J','Z','S','O', 'T'];\n\nexport const speeds = [800, 650, 500, 370, 250, 160];\n\nexport const delays = [50, 60, 70, 80, 90, 100];\n\nexport const fillLine = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1];\n\nexport const blankLine = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n\nexport const blankMatrix: Matrix = _.map(Array(20), () => _.map(Array(10), 0));\n\nexport const blockMatrix: Matrix = _.map(Array(2), () => _.map(Array(4), 0));\n"],"sourceRoot":""}